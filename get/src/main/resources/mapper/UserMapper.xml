<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.get.security.service.UserMapper">
    <select id="findUser">
        SELECT EMAIL,PASSWORD,USER_GRANT FROM MEMBERS WHERE EMAIL=#{email}
    </select>
    <select id="findUserByEmail">
        SELECT * FROM MEMBERS WHERE EMAIL=#{email}
    </select>
    <insert id="save">
        INSERT INTO MEMBERS values (
 #{email}
 ,#{nickname}
 ,#{password}
 ,#{username}
 ,#{birth}
 ,#{phone}
,null
 ,#{address1}
 ,#{address2}
 ,#{postnumber}
 ,SYSDATE
 ,'USER'
,0
,null
                                  )
        <selectKey keyProperty="mem_idx" resultType="java.lang.String" order="AFTER">
            SELECT 'ME' || LPAD(MEMBERS_SEQ.CURRVAL, 8, '0')  FROM dual
        </selectKey></insert>
    <select id="findUserByUserNamePhone">
        SELECT *
        FROM MEMBERS
        WHERE USERNAME=#{username} AND PHONE=#{phone}
    </select>
</mapper>